<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pr√†ctiques Ling√º√≠stiques VxL - Barcelona</title>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=Fraunces:wght@600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #f8f6f4;
            --bg-secondary: #ffffff;
            --text-primary: #1a1614;
            --text-secondary: #6b6560;
            --accent: #d84315;
            --accent-light: #ff6e40;
            --border: #e8e4e0;
            --shadow: rgba(26, 22, 20, 0.08);
            --district-bg: #fef8f5;
        }

        body {
            font-family: 'DM Sans', -apple-system, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
        }

        .header {
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 8px var(--shadow);
        }

        .header-content {
            padding: 1.25rem 1rem 0.75rem;
        }

        .tabs {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.75rem;
        }

        .tab-btn {
            flex: 1;
            padding: 0.5rem 1rem;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-family: 'DM Sans', sans-serif;
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            background: transparent;
            color: var(--text-secondary);
            transition: all 0.2s ease;
        }

        .tab-btn.active {
            background: var(--accent);
            border-color: var(--accent);
            color: white;
        }

        .map-view {
            display: none;
            height: calc(100vh - 160px);
        }

        .map-view.active {
            display: block;
        }

        .list-view {
            display: block;
        }

        .list-view.hidden {
            display: none;
        }

        .map-frame {
            width: 100%;
            height: 100%;
            border: none;
        }

        .title {
            font-family: 'Fraunces', serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 0.25rem;
            letter-spacing: -0.02em;
        }

        .subtitle {
            font-size: 0.875rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .search-container {
            padding: 1rem;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 115px;
            z-index: 99;
        }

        .search-box {
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 0.875rem 1rem 0.875rem 2.75rem;
            border: 2px solid var(--border);
            border-radius: 12px;
            font-size: 1rem;
            font-family: 'DM Sans', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            transition: all 0.2s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--accent);
            background: var(--bg-secondary);
        }

        .search-icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
            pointer-events: none;
        }

        .stats {
            display: flex;
            gap: 1rem;
            padding: 0.75rem 1rem;
            background: var(--district-bg);
            border-bottom: 1px solid var(--border);
            font-size: 0.8125rem;
            color: var(--text-secondary);
        }

        .stat {
            display: flex;
            align-items: center;
            gap: 0.375rem;
        }

        .stat-value {
            font-weight: 700;
            color: var(--accent);
        }

        .content {
            padding: 0.5rem 0 5rem 0;
        }

        .district {
            margin-bottom: 0.5rem;
            background: var(--bg-secondary);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 1px 3px var(--shadow);
        }

        .district-header {
            padding: 1rem 1.25rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(135deg, var(--district-bg) 0%, var(--bg-secondary) 100%);
            border-bottom: 1px solid var(--border);
            user-select: none;
            -webkit-tap-highlight-color: transparent;
            transition: background 0.2s ease;
        }

        .district-header:active {
            background: var(--district-bg);
        }

        .district-title {
            font-family: 'Fraunces', serif;
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
            letter-spacing: -0.01em;
        }

        .district-count {
            font-size: 0.8125rem;
            color: var(--text-secondary);
            font-weight: 500;
            background: var(--bg-primary);
            padding: 0.25rem 0.625rem;
            border-radius: 8px;
        }

        .district-toggle {
            margin-left: 0.75rem;
            font-size: 1.25rem;
            color: var(--accent);
            transition: transform 0.3s ease;
        }

        .district.collapsed .district-toggle {
            transform: rotate(-90deg);
        }

        .establishments {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-out;
        }

        .district.expanded .establishments {
            max-height: 5000px;
        }

        .establishment {
            padding: 1rem 1.25rem;
            border-bottom: 1px solid var(--border);
            transition: background 0.15s ease;
        }

        .establishment:last-child {
            border-bottom: none;
        }

        .establishment:active {
            background: var(--district-bg);
        }

        .establishment-link {
            display: block;
            text-decoration: none;
            color: inherit;
        }

        .establishment-name {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.375rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .establishment-icon {
            color: var(--accent);
            font-size: 1.125rem;
            flex-shrink: 0;
        }

        .establishment-address {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: 0.25rem;
            line-height: 1.5;
        }

        .establishment-notes {
            font-size: 0.8125rem;
            color: var(--accent-light);
            font-weight: 500;
            margin-top: 0.5rem;
            padding: 0.5rem;
            background: var(--district-bg);
            border-radius: 6px;
            border-left: 3px solid var(--accent);
        }

        .no-results {
            padding: 3rem 1.5rem;
            text-align: center;
            color: var(--text-secondary);
        }

        .no-results-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            opacity: 0.3;
        }

        .no-results-text {
            font-size: 1.125rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
        }

        .hidden {
            display: none !important;
        }

        .expand-all-btn {
            margin: 1rem 1rem 0.5rem;
            padding: 0.75rem 1.25rem;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 0.9375rem;
            font-weight: 600;
            font-family: 'DM Sans', sans-serif;
            cursor: pointer;
            width: calc(100% - 2rem);
            transition: all 0.2s ease;
            box-shadow: 0 2px 8px rgba(216, 67, 21, 0.2);
        }

        .expand-all-btn:active {
            transform: scale(0.98);
            box-shadow: 0 1px 4px rgba(216, 67, 21, 0.3);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --bg-primary: #1a1614;
                --bg-secondary: #242220;
                --text-primary: #f8f6f4;
                --text-secondary: #a8a5a0;
                --accent: #ff6e40;
                --accent-light: #ff8a65;
                --border: #3a3634;
                --shadow: rgba(0, 0, 0, 0.3);
                --district-bg: #2a2624;
            }
        }

        .fade-in {
            animation: fadeIn 0.3s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-4px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <h1 class="title">Pr√†ctiques Ling√º√≠stiques</h1>
            <div class="subtitle">Establiments VxL ¬∑ Barcelona ¬∑ Febrer 2026</div>
            <div class="tabs">
                <button class="tab-btn active" id="tabList" onclick="switchTab('list')">üìã Llista</button>
                <button class="tab-btn" id="tabMap" onclick="switchTab('map')">üó∫Ô∏è Mapa</button>
            </div>
        </div>
    </div>

    <div id="listView">
    <div class="search-container">
        <div class="search-box">
            <span class="search-icon">üîç</span>
            <input 
                type="text" 
                class="search-input" 
                id="searchInput" 
                placeholder="Cerca establiment, carrer o barri..."
                autocomplete="off"
            >
        </div>
    </div>

    <div class="stats">
        <div class="stat">
            <span class="stat-value" id="visibleCount">355</span>
            <span>establiments</span>
        </div>
        <div class="stat">
            <span class="stat-value">10</span>
            <span>districtes</span>
        </div>
    </div>

    <button class="expand-all-btn" id="expandAllBtn">Expandir tots els districtes</button>

    <div class="content" id="content">
        <!-- Districts will be generated by JavaScript -->
    </div>

    <div class="no-results hidden" id="noResults">
        <div class="no-results-icon">üîç</div>
        <div class="no-results-text">Cap establiment trobat</div>
        <div style="font-size: 0.875rem;">Prova amb un altre terme de cerca</div>
    </div>
    </div><!-- end listView -->

    <div id="mapView" class="map-view">
        <div id="leafletMap" style="width:100%;height:100%;"></div>
    </div>

    <script>
        const establishments = {
            "Ciutat Vella": [
                { name: "Abracadabra Llibres", address: "C/ General Alvarez de Castro, 5", area: "Sant Pere, Santa Caterina i la Ribera", lat: 41.3867, lng: 2.1797 },
                { name: "Arkham C√≤mics", address: "Carrer Xucl√†, 16, local", area: "El Raval", lat: 41.3820, lng: 2.1720 },
                { name: "Belles Arts Ferran SL", address: "C. Ferran, 39, local 2", area: "G√≤tic", lat: 41.3817, lng: 2.1759 },
                { name: "Caf√® de les del√≠cies", address: "Rambla del Raval, 47", area: "El Raval", lat: 41.3793, lng: 2.1695 },
                { name: "Carns Batllori", address: "Mercat de la Barceloneta, parada 23-24", area: "La Barceloneta", lat: 41.3800, lng: 2.1869 },
                { name: "Casa Carot", address: "C. Dagueria, 16", area: "G√≤tic", lat: 41.3822, lng: 2.1772 },
                { name: "Espai Mallorca", address: "Pla√ßa Vicen√ß Martorell, 1, baixos", area: "El Raval", lat: 41.3838, lng: 2.1710 },
                { name: "Farm√†cia Aviny√≥", address: "C. Aviny√≥, 32", area: "G√≤tic", lat: 41.3806, lng: 2.1768 },
                { name: "Farm√†cia Raimon Piqu√© Figuerola", address: "C. Sant Carles, 7", area: "La Barceloneta", lat: 41.3782, lng: 2.1880 },
                { name: "Floristeria Navarrete Pizarro", address: "Carrer d'en Rull, 3", area: "G√≤tic", lat: 41.3820, lng: 2.1753 },
                { name: "Formatges i mantegues Sim√≥", address: "C/ Sant Pere M√©s Alt, 40", area: "Sant Pere, Santa Caterina i la Ribera", lat: 41.3847, lng: 2.1795 },
                { name: "Forn de pa artes√†", address: "Regomir, 12", area: "G√≤tic", lat: 41.3808, lng: 2.1775 },
                { name: "Fruites i verdures Maria", address: "Francesc Camb√≥, s/n (Mercat Santa Caterina)", area: "Sant Pere, Santa Caterina i la Ribera", lat: 41.3848, lng: 2.1800 },
                { name: "Guido Articles de Pell i Viatge", address: "Carrer Ferran, 14", area: "G√≤tic", lat: 41.3821, lng: 2.1756 },
                { name: "Impremta Sebtor", address: "C/ Hospital, 157", area: "El Raval", lat: 41.3796, lng: 2.1678 },
                { name: "Isabel", address: "Pla√ßa La Font, s/n, parada 7 exterior", area: "La Barceloneta", lat: 41.3798, lng: 2.1870 },
                { name: "La Troballa", address: "C. Ample, 3", area: "G√≤tic", lat: 41.3808, lng: 2.1773 },
                { name: "Les ocasions", address: "C. Sant Carles, 10", area: "La Barceloneta", lat: 41.3781, lng: 2.1878 },
                { name: "Llibreria √áa Porta", address: "C. Sant Pere M√©s Alt, 20", area: "Sant Pere, Santa Caterina i la Ribera", lat: 41.3847, lng: 2.1791 },
                { name: "Llibreria Fahrenheit 451", address: "C. de la Ribera, 8", area: "Sant Pere, Santa Caterina i la Ribera", lat: 41.3840, lng: 2.1830 },
                { name: "Mathom", address: "C/ del Pi, 1", area: "G√≤tic", lat: 41.3829, lng: 2.1732 },
                { name: "Menuts L√≠dia", address: "Pla√ßa Font, s/n (Mercat Barceloneta, parada 51-53)", area: "La Barceloneta", lat: 41.3799, lng: 2.1869 },
                { name: "Merceria Barceloneta", address: "Pla√ßa la Font, s/n (parada exterior 4-6)", area: "La Barceloneta", lat: 41.3798, lng: 2.1868 },
                { name: "Miret", address: "C. Petritxol, 6", area: "G√≤tic", lat: 41.3831, lng: 2.1731 },
                { name: "Noem√≠", address: "Pla√ßa la Font, s/n", area: "La Barceloneta", lat: 41.3797, lng: 2.1870 },
                { name: "Peix i Marisc Montse i S√≤nia", address: "Mercat de la Barceloneta, parada 48-50", area: "La Barceloneta", lat: 41.3800, lng: 2.1870 },
                { name: "Polleria Ca√ßa Francesc", address: "Mercat de la Barceloneta, parada 27-28", area: "La Barceloneta", lat: 41.3799, lng: 2.1871 },
                { name: "Tito Fresh Fruit", address: "Pla√ßa Regomir, 1", area: "G√≤tic", notes: "Preguntar pel Mansoor", lat: 41.3807, lng: 2.1775 },
                { name: "Verduleria BUBUB", address: "Carrer Joaquim Costa, 29", area: "El Raval", lat: 41.3826, lng: 2.1694 }
            ],
            "Gr√†cia": [
                { name: "Al Gra del sac al plat", address: "Sant Crist√≤fol, 17", area: "Vila de Gr√†cia", lat: 41.4028, lng: 2.1561 },
                { name: "Alaska", address: "Av. Vallcarca, 44", area: "Vallcarca", lat: 41.4148, lng: 2.1480 },
                { name: "Atzavara Llibreria", address: "Escorial, 94", area: "Camp d'en Grassot-Gr√†cia Nova", lat: 41.4052, lng: 2.1623 },
                { name: "Bateau Lune", address: "Pla√ßa de la Virreina, 7", area: "Gr√†cia", lat: 41.4040, lng: 2.1558 },
                { name: "Bell Estiu", address: "Verdi, 8, local 2", area: "Vila de Gr√†cia", lat: 41.4028, lng: 2.1555 },
                { name: "Del Be a la Manta", address: "Gran de Gr√†cia, 86", area: "Vila de Gr√†cia", lat: 41.4002, lng: 2.1558 },
                { name: "EGE llibres i cosetes", address: "Benet Mercad√©, 22, baixos", area: "Vila de Gr√†cia", lat: 41.4010, lng: 2.1562 },
                { name: "El Celler de la Ribera", address: "Cigne, 12, baixos", area: "Vila de Gr√†cia", lat: 41.4022, lng: 2.1578 },
                { name: "Flor de Lis", address: "Cigne, 15", area: "Vila de Gr√†cia", lat: 41.4023, lng: 2.1579 },
                { name: "Idyllica", address: "Rambla de Prat, 11", area: "Vila de Gr√†cia", lat: 41.4060, lng: 2.1540 },
                { name: "Industria 61", address: "Ind√∫stria, 61", area: "Camp d'En Grassot-Gr√†cia Nova", lat: 41.4055, lng: 2.1618 },
                { name: "La mamavaca", address: "Rambla de Prat, 25", area: "Vila de Gr√†cia", notes: "Pr√†ctiques: dimarts i dijous de 10 a 14", lat: 41.4063, lng: 2.1538 },
                { name: "La Repunantinha", address: "Torrent de l'Olla, 143", area: "Vila de Gr√†cia", lat: 41.4058, lng: 2.1572 },
                { name: "Les Cosines Rosa", address: "Puig-Rodon Pla, 14 bis", area: "Vila de Gr√†cia", notes: "Pr√†ctiques: dijous i divendres 12-16h", lat: 41.4032, lng: 2.1560 },
                { name: "Llibreria Claret", address: "Sic√≠lia, 410", area: "Gr√†cia", lat: 41.4062, lng: 2.1740 },
                { name: "Llibreria La Mem√≤ria", address: "Pla√ßa de la Vila de Gr√†cia, 19", area: "Gr√†cia", lat: 41.4035, lng: 2.1548 },
                { name: "Llibreria P√†gina 128", address: "Torrent de l'Olla, 177", area: "Gr√†cia", lat: 41.4065, lng: 2.1573 },
                { name: "Naturasi Biosi", address: "Ramon y Cajal, 42", area: "Gr√†cia Nova", lat: 41.4075, lng: 2.1635 },
                { name: "Sendak", address: "C√≤rsega, 461", area: "Camp d'en Grassot-Gr√†cia Nova", lat: 41.4019, lng: 2.1751 },
                { name: "Sol Nature", address: "Pla√ßa de la Llibertat, 13", area: "Vila de Gr√†cia", lat: 41.4025, lng: 2.1548 },
                { name: "Vestuari Compartit", address: "c/ Verdi, 100", area: "Vila de Gr√†cia", notes: "Obert de 18 a 20 hores", lat: 41.4055, lng: 2.1560 },
                { name: "Vom Fass", address: "Cigne, 14", area: "Vila de Gr√†cia", lat: 41.4022, lng: 2.1579 },
                { name: "Zueras art i plata", address: "Carrer del Cigne, 18", area: "Vila de Gr√†cia", lat: 41.4025, lng: 2.1580 },
                { name: "El Caiman Alegre Roba Urbana", address: "Travessera de Gr√†cia, 168", area: "Vila de Gr√†cia", lat: 41.4022, lng: 2.1580 },
                { name: "Forn la Sitja", address: "Carrer Provid√®ncia, 59", area: "Camp d'en Grassot", lat: 41.4075, lng: 2.1570 },
                { name: "Forn Rovira", address: "Rabassa, 25", area: "Gr√†cia", lat: 41.4038, lng: 2.1590 }
            ],
            "Eixample": [
                { name: "Abacus Urquinaona", address: "c/ Ausi√†s Marc, 16", area: "Dreta de l'Eixample", lat: 41.3905, lng: 2.1760 },
                { name: "Al¬∑lots", address: "Consell de Cent, 266", area: "Esquerra de l'Eixample", lat: 41.3873, lng: 2.1628 },
                { name: "Albert Cal√ßats", address: "Dos de Maig, 221", area: "Sagrada Fam√≠lia", lat: 41.4028, lng: 2.1817 },
                { name: "Blau intens", address: "c. Floridablanca, 64", area: "Sant Antoni", lat: 41.3800, lng: 2.1622 },
                { name: "Bracaf√®", address: "C. Comte d'Urgell, 35", area: "Sant Antoni", lat: 41.3825, lng: 2.1540 },
                { name: "Carns Cinta", address: "Arag√≥, 317 (Mercat Concepci√≥, parades 51-55)", area: "Dreta Eixample", lat: 41.3930, lng: 2.1728 },
                { name: "Confeccions El rellotge", address: "Comte Borrell, 89", area: "Sant Antoni", lat: 41.3832, lng: 2.1559 },
                { name: "Espai Abacus Enric Granados", address: "Enric Granados, 112", area: "Antiga Esquerra de l'Eixample", lat: 41.3942, lng: 2.1604 },
                { name: "Farm√†cia Eul√†lia Vives Ferrer", address: "C. Manso, 64", area: "Sant Antoni", lat: 41.3790, lng: 2.1596 },
                { name: "Farm√†cia March Puigoriol", address: "C. Mallorca, 312", area: "Dreta de l'Eixample", lat: 41.3965, lng: 2.1741 },
                { name: "Foto Xavi", address: "Av. Mistral, 8", area: "Sant Antoni", lat: 41.3775, lng: 2.1590 },
                { name: "Gadial", address: "Ronda Sant Pau, 65", area: "Sant Antoni", lat: 41.3773, lng: 2.1651 },
                { name: "Gasca Moda Home", address: "Tamarit, 169", area: "Sant Antoni", lat: 41.3829, lng: 2.1568 },
                { name: "G√®neres de punt La Torre", address: "Pl. Universitat, 4", area: "Eixample", lat: 41.3872, lng: 2.1641 },
                { name: "Halcon viatges", address: "c. Manso, 74", area: "Sant Antoni", lat: 41.3790, lng: 2.1598 },
                { name: "Herboristeria Margarida Casta√±o", address: "Lepant, 172", area: "Eixample", lat: 41.4020, lng: 2.1828 },
                { name: "Idiomes Tarradellas", address: "Av. Josep Tarradellas, 96", area: "Eixample", lat: 41.3872, lng: 2.1400 },
                { name: "Idoni - Bon cor", address: "Avinguda Mistral, 20 bis", area: "Sant Antoni", lat: 41.3770, lng: 2.1575 },
                { name: "La caixa d'eines", address: "Arag√≥, 367", area: "Dreta de l'Eixample", lat: 41.3932, lng: 2.1769 },
                { name: "La Llama Store", address: "Tamarit, 148", area: "Eixample", lat: 41.3827, lng: 2.1563 },
                { name: "Le Petit", address: "Cal√†bria, 136", area: "Nova Esquerra de l'Eixample", lat: 41.3835, lng: 2.1534 },
                { name: "L'herbolari", address: "c. Rocafort, 50", area: "Sant Antoni", lat: 41.3800, lng: 2.1527 },
                { name: "Llibreria Abadia", address: "Ausi√†s March, 92", area: "Fort Pienc", lat: 41.3942, lng: 2.1857 },
                { name: "Llibreria Calders", address: "Passatge de Pere Calders, 9", area: "Eixample", lat: 41.3793, lng: 2.1620 },
                { name: "Llibreria de la Imatge", address: "Sep√∫lveda, 87", area: "Sant Antoni", lat: 41.3796, lng: 2.1579 },
                { name: "Llibreria Documenta", address: "Pau Claris, 144", area: "Dreta de l'Eixample", lat: 41.3945, lng: 2.1692 },
                { name: "Llibreria Finestres", address: "Diputaci√≥, 249", area: "Dreta Eixample", lat: 41.3892, lng: 2.1625 },
                { name: "Merceria Esmar", address: "C/ Enten√ßa, 122", area: "Nova Esquerra de l'Eixample", lat: 41.3858, lng: 2.1483 },
                { name: "Mobiliari Miralles", address: "C. Tamarit, 147", area: "Sant Antoni", lat: 41.3829, lng: 2.1567 },
                { name: "Olives i conserves M. Rosa Benet", address: "Arag√≥, 313 (Mercat Concepci√≥, parada 105)", area: "Dreta Eixample", lat: 41.3930, lng: 2.1726 },
                { name: "Ona Llibres", address: "Pau Claris, 94", area: "Dreta de l'Eixample", lat: 41.3928, lng: 2.1688 },
                { name: "Papereria Canut", address: "C/ Girona, 73", area: "Dreta de l'Eixample", lat: 41.3930, lng: 2.1697 },
                { name: "Pastisseria Bonastre", address: "Tamarit, 136", area: "Eixample", lat: 41.3826, lng: 2.1560 },
                { name: "Petit gegant", address: "Parlament, 6", area: "Sant Antoni", lat: 41.3793, lng: 2.1628 },
                { name: "Reparat Millor que Nou", address: "C. Sep√∫lveda, 45-47, baixos", area: "Eixample", lat: 41.3797, lng: 2.1582 },
                { name: "Santa Ant√≤nia", address: "Creu Coberta, 99", area: "Eixample", lat: 41.3762, lng: 2.1469 },
                { name: "Sunta Peixaters", address: "Arag√≥, 317 (parades 84-89)", area: "Dreta Eixample", lat: 41.3930, lng: 2.1728 },
                { name: "Tempo", address: "C. Cal√†bria, 62", area: "Eixample", lat: 41.3800, lng: 2.1527 },
                { name: "Torrons Verd√∫", address: "Bruc, 126", area: "Dreta de l'Eixample", lat: 41.3975, lng: 2.1699 },
                { name: "Valls, Roba per la llar", address: "Val√®ncia, 542, A51 (Encants Nous)", area: "Sagrada Fam√≠lia", lat: 41.4028, lng: 2.1865 },
                { name: "Venivinum", address: "C/ de C√≤rsega, 209", area: "Nova Esquerra de l'Eixample", lat: 41.3960, lng: 2.1517 },
                { name: "Via dol√ßa", address: "c. Tamarit, 152", area: "Sant Antoni", notes: "Pr√†ctiques nom√©s matins", lat: 41.3828, lng: 2.1565 },
                { name: "Xarcuteria Filo", address: "Arag√≥, 317 (parades 77-81)", area: "Dreta Eixample", lat: 41.3930, lng: 2.1728 }
            ],
            "Horta - Guinard√≥": [
                { name: "Ampli-Art Marim√≥n", address: "Ptge. Ll√≠via, 33", area: "Horta-Guinard√≥", lat: 41.4318, lng: 2.1530 },
                { name: "Art i Paper", address: "Travessera de Gr√†cia 337", area: "Horta-Guinard√≥", lat: 41.4110, lng: 2.1618 },
                { name: "Carnisseria Marina", address: "c/ Tajo, 75 (Mercat d'Horta, parades 18-21)", area: "Horta-Guinard√≥", lat: 41.4320, lng: 2.1480 },
                { name: "Collell", address: "C/ Tajo 69-71", area: "Horta-Guinard√≥", lat: 41.4318, lng: 2.1478 },
                { name: "El tastet de la Lola", address: "Avinguda Mare de D√©u de Montserrat, 49", area: "Horta-Guinard√≥", lat: 41.4205, lng: 2.1630 },
                { name: "Els colors de l'Eva", address: "Carrer De La Murtra, 135", area: "Horta-Guinard√≥", lat: 41.4380, lng: 2.1499 },
                { name: "Els Remeis Herbolari", address: "Carrer Praga, 31", area: "Horta-Guinard√≥", lat: 41.4282, lng: 2.1765 },
                { name: "Farm√†cia Bonany Jan√©", address: "c/ Sant Antoni M. Claret, 97", area: "Horta-Guinard√≥", lat: 41.4105, lng: 2.1672 },
                { name: "Ferreteria El Casal", address: "Passatge dels Garrofers, 29", area: "Horta-Guinard√≥", lat: 41.4322, lng: 2.1498 },
                { name: "Fogons del Guinard√≥", address: "C/ Vars√≤via 148, local 2", area: "Horta-Guinard√≥", lat: 41.4282, lng: 2.1758 },
                { name: "Forners & Pastissers Puig", address: "c/ √Ängel Marqu√®s, 14-18 baixos", area: "Horta-Guinard√≥", lat: 41.4310, lng: 2.1478 },
                { name: "Gaia llibres i jocs", address: "Av. Mare de D√©u de Montserrat, 153", area: "Horta", lat: 41.4360, lng: 2.1540 },
                { name: "Herbolari Diet√®tica Blau i Verd", address: "Tolr√† 29-31", area: "Horta-Guinard√≥", lat: 41.4330, lng: 2.1492 },
                { name: "Joguines i regals Molin√©", address: "Pla√ßa Eivissa, 6 (Galeries Horta, botiga 3)", area: "Horta-Guinard√≥", lat: 41.4318, lng: 2.1498 },
                { name: "JOVE GALATEA", address: "c/ Palafox, 30-31 baixos", area: "Horta", lat: 41.4340, lng: 2.1500 },
                { name: "La Bodegueta del Guinard√≥", address: "c/ Vars√≤via, 84", area: "Horta-Guinard√≥", lat: 41.4280, lng: 2.1752 },
                { name: "La Cepa de ORO", address: "Avinguda Mare de D√©u de Montserrat, 35", area: "Horta-Guinard√≥", lat: 41.4202, lng: 2.1628 },
                { name: "La Girella", address: "c/ Santa Carolina, 48", area: "Horta-Guinard√≥", lat: 41.4350, lng: 2.1501 },
                { name: "La Marga Moda Infantil", address: "Av. de la Mare de D√©u de Montserrat, 113", area: "Horta-Guinard√≥", lat: 41.4352, lng: 2.1538 },
                { name: "La Yoguisteria", address: "c/Chap√≠, 28", area: "Horta", lat: 41.4340, lng: 2.1505 },
                { name: "Lluna de paper", address: "Feliu i Codina, 6", area: "Horta-Guinard√≥", lat: 41.4320, lng: 2.1502 },
                { name: "Ous Susana", address: "c/ Tajo, 75 (Mercat d'Horta, parada 72-73)", area: "Horta-Guinard√≥", lat: 41.4320, lng: 2.1480 },
                { name: "Peixateria Marisqueria La Mar de Fresc", address: "c/ Tajo, 75 (Mercat d'Horta, parada 140-142)", area: "Horta-Guinard√≥", lat: 41.4320, lng: 2.1480 },
                { name: "Peixateria Olga", address: "C/ Llobreg√≥s 147 (Mercat del Carmel, parades 23-28)", area: "Horta-Guinard√≥", lat: 41.4208, lng: 2.1658 },
                { name: "Per Dins", address: "c/ Sant Antoni Ma Claret, 139", area: "Horta-Guinard√≥", lat: 41.4112, lng: 2.1682 }
            ],
            "Les Corts": [
                { name: "ANS COCINAS BA√ëOS Y OBRAS", address: "Travessera de les Corts, 220", area: "Les Corts", lat: 41.3862, lng: 2.1120 },
                { name: "Ateneu Popular de les Corts", address: "Galileu, 252", area: "Les Corts", lat: 41.3865, lng: 2.1220 },
                { name: "Bugaderia Solanas", address: "Caballero, 53", area: "Les Corts", lat: 41.3832, lng: 2.1138 },
                { name: "Cal Pueyo", address: "Vilamur, 20", area: "Les Corts", lat: 41.3898, lng: 2.1049 },
                { name: "Cal√ßats Toll", address: "Cabestany, 5", area: "Les Corts", lat: 41.3825, lng: 2.1130 },
                { name: "Carnisseries Sol√©", address: "Mercat de les Corts, parada 97-101", area: "Les Corts", lat: 41.3840, lng: 2.1170 },
                { name: "Carns Banach", address: "Travessera de les Corts, 215 (Mercat)", area: "Les Corts", lat: 41.3840, lng: 2.1170 },
                { name: "Crudicakes", address: "Carrer Comte de G√ºell, 25", area: "Les Corts", lat: 41.3873, lng: 2.1192 },
                { name: "Diet Center", address: "Joan G√ºell, 172", area: "Les Corts", lat: 41.3842, lng: 2.1290 },
                { name: "El Gat Pelut", address: "Caballero, 58", area: "Les Corts", lat: 41.3832, lng: 2.1140 },
                { name: "El pa sencer", address: "Vallespir, 161", area: "Les Corts", lat: 41.3790, lng: 2.1092 },
                { name: "EnergyClima", address: "Travessera de les Corts, 195", area: "Les Corts", lat: 41.3858, lng: 2.1115 },
                { name: "Escoda Decoracions Alessandra", address: "C/ Joan G√ºell, 136", area: "Les Corts", lat: 41.3840, lng: 2.1280 },
                { name: "Fent Punt", address: "Gran Via Carles III, 46-48", area: "Les Corts", lat: 41.3855, lng: 2.1135 },
                { name: "Fruites i verdures Oms", address: "Mercat de les Corts, parada 46-48", area: "Les Corts", lat: 41.3840, lng: 2.1170 },
                { name: "Fustacadabra", address: "Joan G√ºell, 131", area: "Les Corts", lat: 41.3838, lng: 2.1278 },
                { name: "In Blue", address: "Travessera de les Corts, 300", area: "Les Corts", lat: 41.3870, lng: 2.1148 },
                { name: "La pera", address: "Mercat de les Corts, parada 80-85", area: "Les Corts", lat: 41.3840, lng: 2.1170 },
                { name: "Masclans Artesans del Bacall√†", address: "Mercat de les Corts, parada 87-89", area: "Les Corts", lat: 41.3840, lng: 2.1170 },
                { name: "Normafilms", address: "Travessera de les Corts, 261", area: "Les Corts", lat: 41.3862, lng: 2.1137 },
                { name: "Peix de proximitat la Barqueta", address: "Mercat de les Corts, parada 105-108", area: "Les Corts", lat: 41.3840, lng: 2.1170 },
                { name: "Rayo √íptics", address: "Travessera de les Corts, 236", area: "Les Corts", lat: 41.3860, lng: 2.1128 },
                { name: "Sunta. Professionals del peix", address: "Mercat de les Corts, Travessera 215", area: "Les Corts", lat: 41.3840, lng: 2.1170 },
                { name: "Vagi de gust SCP", address: "Mercat de les Corts, parada 70-71", area: "Les Corts", lat: 41.3840, lng: 2.1170 },
                { name: "Xarcuteria Castell√≥", address: "Travessera de les Corts, 215 (Mercat)", area: "Les Corts", lat: 41.3840, lng: 2.1170 }
            ],
            "Nou Barris": [
                { name: "Abacus Cooperativa - Fabra i Puig", address: "P. Fabra i Puig, 196", area: "Vilapicina i la Torre Llobeta", lat: 41.4400, lng: 2.1735 },
                { name: "Alc√∫dia", address: "Alc√∫dia, 50", area: "Porta", lat: 41.4442, lng: 2.1770 },
                { name: "Alella Viatges", address: "Alella, 45", area: "Porta", lat: 41.4450, lng: 2.1768 },
                { name: "Auto-escuelas Batlle", address: "Passeig de Valldaura, 266", area: "Porta", lat: 41.4422, lng: 2.1758 },
                { name: "Bar El Xampinyonet", address: "Antonio Machado, 10 (Mercat de Canyelles)", area: "Canyelles", lat: 41.4525, lng: 2.1680 },
                { name: "Carns Juan i Loli", address: "Antonio Machado, 10 (Mercat de Canyelles)", area: "Canyelles", lat: 41.4525, lng: 2.1680 },
                { name: "Comercial Kare", address: "Pg. Valldaura, 239", area: "Porta", lat: 41.4420, lng: 2.1752 },
                { name: "Corseter√≠a Alfonsita", address: "Passeig de Fabra i Puig, 223", area: "Vilapicina", notes: "Cal trucar: Rosa 607304587", lat: 41.4392, lng: 2.1730 },
                { name: "Diet√®tica les Herbes", address: "Antonio Machado, 10 (Mercat de Canyelles)", area: "Canyelles", lat: 41.4525, lng: 2.1680 },
                { name: "Edan Vedruna", address: "Pg Valldaura, 186 (Mercat de la Guineueta)", area: "La Guineueta", lat: 41.4498, lng: 2.1715 },
                { name: "El cau de la Naira", address: "Av. Rios de Janeiro, 75, local 2", area: "Porta", lat: 41.4458, lng: 2.1762 },
                { name: "El Tan√≠ vinol√≤gic", address: "Pl. Virrei Amat, 12", area: "Vilapicina i la Torre Llobeta", lat: 41.4382, lng: 2.1722 },
                { name: "Farm√†cia Garrofers", address: "Garrofers, 52", area: "Porta", lat: 41.4430, lng: 2.1755 },
                { name: "Flowrspace", address: "Garrofers, 36", area: "Porta", lat: 41.4428, lng: 2.1752 },
                { name: "Fruites V√≠ctor", address: "Pg Valldaura, 186 (Mercat de la Guineueta)", area: "La Guineueta", lat: 41.4498, lng: 2.1715 },
                { name: "Guitart & Gust", address: "Pg Valldaura, 186 (Mercat de la Guineueta)", area: "La Guineueta", lat: 41.4498, lng: 2.1715 },
                { name: "Karnipolis", address: "Pg Valldaura, 186 (Mercat de la Guineueta)", area: "La Guineueta", lat: 41.4498, lng: 2.1715 },
                { name: "La font de mimir", address: "Costa i Cuxart, 5", area: "Vilapicina i la Torre Llobeta", lat: 41.4388, lng: 2.1725 },
                { name: "La ragatzza", address: "Pg Valldaura, 186 (Mercat de la Guineueta)", area: "La Guineueta", lat: 41.4498, lng: 2.1715 },
                { name: "Llibreria Santos Ochoa", address: "P. Fabra i Puig, 165", area: "Vilapicina i la Torre Llobeta", lat: 41.4388, lng: 2.1726 },
                { name: "Lusajo Esports", address: "Rbla. Fabra i Puig, 47", area: "Vilapicina i la Torre Llobeta", lat: 41.4378, lng: 2.1730 },
                { name: "Mobles Artesania", address: "Artesania, 56", area: "La Guineueta", lat: 41.4510, lng: 2.1710 },
                { name: "Modas Casas", address: "Antonio Machado, 10 (Mercat de Canyelles)", area: "Canyelles", lat: 41.4525, lng: 2.1680 },
                { name: "Naturalment", address: "Pg. Valldaura, 186 (Mercat de la Guineueta)", area: "La Guineueta", lat: 41.4498, lng: 2.1715 },
                { name: "Peix i marisc Neus", address: "Pg Valldaura, 186 (Mercat de la Guineueta)", area: "La Guineueta", lat: 41.4498, lng: 2.1715 },
                { name: "Peixos Roqueta", address: "Antonio Machado, 10 (Mercat de Canyelles)", area: "Canyelles", lat: 41.4525, lng: 2.1680 },
                { name: "Pollastres & altres Siscu", address: "Pg. Valldaura, 186 (Mercat de la Guineueta)", area: "La Guineueta", lat: 41.4498, lng: 2.1715 },
                { name: "Salados Funes", address: "Pg Valldaura, 186 (Mercat de la Guineueta)", area: "La Guineueta", lat: 41.4498, lng: 2.1715 },
                { name: "TASC (Tur√≥ Acci√≥ Socio Cultural)", address: "Passeig Fabra i Puig, 274-276", area: "Nou Barris", lat: 41.4405, lng: 2.1738 },
                { name: "Teixits Irelena", address: "P. Fabra i Puig, 248", area: "Nou Barris", lat: 41.4402, lng: 2.1740 },
                { name: "Xarcuteria M. Guerrero", address: "Pg Valldaura, 186 (Mercat de la Guineueta)", area: "La Guineueta", lat: 41.4498, lng: 2.1715 },
                { name: "Xarcuteria Mireia", address: "Antonio Machado, 10 (Mercat de Canyelles)", area: "Canyelles", lat: 41.4525, lng: 2.1680 }
            ],
            "Sant Andreu": [
                { name: "Aromes Caf√® Lounge", address: "c/ Gran de Sant Andreu, 152", area: "Sant Andreu del Palomar", lat: 41.4378, lng: 2.1895 },
                { name: "Azure", address: "c/ Gran de Sant Andreu", area: "Sant Andreu del Palomar", lat: 41.4378, lng: 2.1900 },
                { name: "Call", address: "c/ Gran de Sant Andreu, 265", area: "Sant Andreu del Palomar", lat: 41.4390, lng: 2.1915 },
                { name: "Cansaladeria Puig", address: "Gran de Sant Andreu, 147", area: "Sant Andreu de Palomar", lat: 41.4375, lng: 2.1892 },
                { name: "Carnisseria Andreu", address: "Pl. Mercadal, 41 (Mercat, p.11)", area: "Sant Andreu de Palomar", lat: 41.4368, lng: 2.1885 },
                { name: "Casa Rusca", address: "c/ Gran de Sant Andreu, 135", area: "Sant Andreu del Palomar", lat: 41.4372, lng: 2.1890 },
                { name: "Collita pr√≤pia Tugas i companyia", address: "Pla√ßa del Mercadal, 41 (Mercat, Parada 20)", area: "Sant Andreu de Palomar", lat: 41.4368, lng: 2.1885 },
                { name: "Cupcakemoka Bakery", address: "c. del Llenguadoc, 92", area: "Sant Andreu del Palomar", lat: 41.4360, lng: 2.1878 },
                { name: "Dit i fet", address: "c/ Balari i Jovany, 4", area: "Sant Andreu de Palomar", lat: 41.4372, lng: 2.1880 },
                { name: "Espai de joc", address: "C. de Llenguadoc 49", area: "Sant Andreu de Palomar", lat: 41.4358, lng: 2.1875 },
                { name: "Farm√†cia Franquesa", address: "C. Gran de Sant Andreu, 260", area: "Sant Andreu de Palomar", lat: 41.4388, lng: 2.1912 },
                { name: "Finetwork", address: "Carrer Gran de Sant Andreu, 205", area: "Sant Andreu de Palomar", lat: 41.4382, lng: 2.1905 },
                { name: "Formatgeria Ireneu", address: "c/ Gran de Sant Andreu", area: "Sant Andreu de Palomar", lat: 41.4380, lng: 2.1902 },
                { name: "Forn Trinitat", address: "Pla√ßa de la Trinitat, 14", area: "Sant Andreu de Palomar", lat: 41.4362, lng: 2.1882 },
                { name: "Graneria Sant Andreu", address: "c. Gran de Sant Andreu, 29", area: "Sant Andreu de Palomar", lat: 41.4348, lng: 2.1860 },
                { name: "Jocs i Joguines did√†ctiques La Jota", address: "c. Borriana, 95", area: "Sant Andreu de Palomar", lat: 41.4360, lng: 2.1870 },
                { name: "La botiga de la Pepi", address: "c. Mercat, 4", area: "Sant Andreu del Palomar", lat: 41.4370, lng: 2.1885 },
                { name: "La Botiga Ecol√≤gica", address: "Gran de Sant Andreu, 242", area: "Sant Andreu de Palomar", lat: 41.4386, lng: 2.1910 },
                { name: "La Tribu Llibreria", address: "c. Pons i Gallarza, 30", area: "Sant Andreu de Palomar", lat: 41.4358, lng: 2.1875 },
                { name: "Llenceria Maria", address: "Ajuntament, 5", area: "Sant Andreu de Palomar", lat: 41.4368, lng: 2.1882 },
                { name: "Llibreria Canales", address: "Rbla. Fabra i Puig, 3", area: "Sant Andreu del Palomar", lat: 41.4345, lng: 2.1855 },
                { name: "Llibreria Papereria La Bosch", address: "Passeig de Maragall, 166", area: "El Congr√©s i els Indians", lat: 41.4305, lng: 2.1790 },
                { name: "Lluna de Formatge", address: "c. Ajuntament, 12", area: "Sant Andreu de Palomar", lat: 41.4368, lng: 2.1883 },
                { name: "Matalasseria L√°zaro", address: "Gran de Sant Andreu, 184", area: "Sant Andreu de Palomar", lat: 41.4380, lng: 2.1898 },
                { name: "Merceria Perell√≥", address: "c. Gran de Sant Andreu, 261", area: "Sant Andreu de Palomar", lat: 41.4388, lng: 2.1913 },
                { name: "NATURASI MANDUCA", address: "c. Garcilaso, 191", area: "El Congr√©s i els Indians", lat: 41.4312, lng: 2.1800 },
                { name: "Onix BCN Perruqueria Vegana", address: "c. de Nadal, 31", area: "Sant Andreu del Palomar", lat: 41.4358, lng: 2.1870 },
                { name: "Opticalia Sant Andreu", address: "Carrer Gran de Sant Andreu, 414", area: "Sant Andreu de Palomar", lat: 41.4415, lng: 2.1945 },
                { name: "Orient Express Modelisme", address: "c. Gran de Sant Andreu, 12", area: "Sant Andreu de Palomar", lat: 41.4342, lng: 2.1855 },
                { name: "Piacci Argent", address: "Pla√ßa del Comer√ß, 3", area: "Sant Andreu del Palomar", lat: 41.4362, lng: 2.1878 },
                { name: "Polleria Eul√†lia", address: "Pl. Mercadal, 41, parades 21-22 (Mercat)", area: "Sant Andreu de Palomar", lat: 41.4368, lng: 2.1885 },
                { name: "Sabateca", address: "c. Gran de Sant Andreu, 208", area: "Sant Andreu del Palomar", lat: 41.4383, lng: 2.1905 },
                { name: "Several Caf√®", address: "c/ Gran de Sant Andreu, 165", area: "Sant Andreu del Palomar", lat: 41.4378, lng: 2.1895 },
                { name: "Sol&Deco", address: "Passeig Maragall, 178-180 Local 3", area: "El Congr√©s i els Indians", lat: 41.4308, lng: 2.1792 },
                { name: "Terranova 80", address: "C/ Segre, 55, local 1 bis", area: "Sant Andreu de Palomar", lat: 41.4350, lng: 2.1862 },
                { name: "Viatges Pons", address: "Rub√©n Dar√≠o, 15", area: "Sant Andreu de Palomar", lat: 41.4360, lng: 2.1880 }
            ],
            "Sant Mart√≠": [
                { name: "Adm. Loteria Poblenou", address: "C. Llull, 189", area: "Poblenou", lat: 41.3988, lng: 2.1980 },
                { name: "Aimada", address: "C. Mari√† Aguil√≥, 120, baixos", area: "Poblenou", lat: 41.3980, lng: 2.1955 },
                { name: "Angie & Deme Dreams", address: "C. Doctor Trueta, 146, local 1", area: "Poblenou", lat: 41.3970, lng: 2.1970 },
                { name: "Armand √íptics", address: "Clot, 66", area: "Clot", lat: 41.4108, lng: 2.1852 },
                { name: "Arx√© Moda", address: "Pl. del Doctor Serrat, 3", area: "Clot", lat: 41.4098, lng: 2.1855 },
                { name: "Associaci√≥ de Ball Alocubano", address: "C. Joncar, 27, local 2", area: "Poblenou", lat: 41.3960, lng: 2.1962 },
                { name: "Associaci√≥ Llibres Lliures Catalunya", address: "c/ Cant√†bria, 72", area: "La Verneda", notes: "PL nom√©s dilluns i dimecres matins", lat: 41.4102, lng: 2.2080 },
                { name: "A√∫pa Organics", address: "Rbla. del Poblenou, 66", area: "Poblenou", lat: 41.3998, lng: 2.1965 },
                { name: "Autoescola la Ele", address: "Rambla Prim, 83", area: "El Bes√≤s i El Maresme", lat: 41.4072, lng: 2.2150 },
                { name: "Bar Catalunya", address: "C. Pere IV, 120", area: "Poblenou", lat: 41.3975, lng: 2.1918 },
                { name: "Bar del Centre Cultural la Farinera del Clot", address: "Av. Gran Via de les Corts Catalanes, 837", area: "Clot", lat: 41.4098, lng: 2.1878 },
                { name: "Bar Restaurant N√∫ria Pous", address: "C. Santander, 16", area: "La Verneda i La Pau", lat: 41.4085, lng: 2.2060 },
                { name: "Blanco Mobles", address: "C. Mari√† Aguil√≥, 116", area: "Poblenou", lat: 41.3978, lng: 2.1952 },
                { name: "Bolibloc", address: "C. Sant Quint√≠, 39", area: "Camp de l'Arpa del Clot", lat: 41.4108, lng: 2.1802 },
                { name: "Can Culleres", address: "C. Bilbao, 79", area: "Poblenou", notes: "Pr√†ctiques: dimecres i dijous 9.30-11.30h", lat: 41.4005, lng: 2.1945 },
                { name: "Carnisseria Ana Pilar", address: "Rambla Prim, 153", area: "La Pau i La Verneda", lat: 41.4082, lng: 2.2160 },
                { name: "Carnisseria Lourdes", address: "Pl. del Mercat, 26 (Mercat del Clot)", area: "Clot", lat: 41.4100, lng: 2.1848 },
                { name: "Carns √örsula", address: "Pl. del Mercat, 26 (Mercat del Clot)", area: "Clot", lat: 41.4100, lng: 2.1848 },
                { name: "DVI Vinoteca", address: "C. Mari√† Aguil√≥, 120", area: "Poblenou", lat: 41.3980, lng: 2.1955 },
                { name: "El Pag√®s", address: "Pl. del Mercat, 26 (Mercat del Clot)", area: "Clot", lat: 41.4100, lng: 2.1848 },
                { name: "El Trapella del Poblenou", address: "C. Pujades, 207 bis", area: "Poblenou", lat: 41.3965, lng: 2.1938 },
                { name: "Embotits i Formatges J. Salvat", address: "Pl. del Mercat, 26 (Mercat del Clot)", area: "Clot", lat: 41.4100, lng: 2.1848 },
                { name: "Escola-Taller Novart", address: "Enamorats, 140", area: "Clot", lat: 41.4118, lng: 2.1840 },
                { name: "Estanc Papereria Paloma", address: "C. Clot, 59", area: "Clot", lat: 41.4108, lng: 2.1850 },
                { name: "Farm√†cia Diagonal 180", address: "Av. Diagonal, 180", area: "Poblenou", lat: 41.3972, lng: 2.1918 },
                { name: "Farm√†cia Jaume Gir√≥ Loperena", address: "Mari√† Aguil√≥, 53", area: "Poblenou", lat: 41.3970, lng: 2.1930 },
                { name: "Farm√†cia Marina Oriol", address: "C. Llull, 187", area: "Poblenou", lat: 41.3988, lng: 2.1978 },
                { name: "Farm√†cia Montse Villar", address: "Rambla Poblenou, 21", area: "Poblenou", lat: 41.3998, lng: 2.1960 },
                { name: "Farm√†cia Poblenou", address: "C. Pallars, 231", area: "Poblenou", lat: 41.3982, lng: 2.1952 },
                { name: "FNAC Gl√≤ries", address: "Av. Diagonal, 208", area: "Poblenou", lat: 41.3980, lng: 2.1920 },
                { name: "Forn Elias", address: "C. Freser, 90", area: "Camp de l'Arpa del Clot", lat: 41.4118, lng: 2.1820 },
                { name: "Forn Santanach", address: "Rambla Poble Nou 98", area: "Poblenou", lat: 41.4005, lng: 2.1968 },
                { name: "Fruites i Verdures Pili", address: "Pl. del Mercat, 26 (Mercat del Clot)", area: "Clot", lat: 41.4100, lng: 2.1848 },
                { name: "Ginkgo Llar", address: "C. Mari√† Aguil√≥, 59", area: "Poblenou", lat: 41.3972, lng: 2.1932 },
                { name: "Gos i Gat", address: "Rogent, 16", area: "Camp de l'Arpa del Clot", lat: 41.4118, lng: 2.1808 },
                { name: "Hard Bikes", address: "C. Arag√≥, 648", area: "El Clot", lat: 41.4105, lng: 2.1862 },
                { name: "Idem Art Gr√†fic", address: "C. Mari√† Aguil√≥, 24", area: "Poblenou", lat: 41.3968, lng: 2.1920 },
                { name: "Invictus Nutrici√≥ & Fitness", address: "Rogent, 3", area: "Camp de l'Arpa del Clot", lat: 41.4118, lng: 2.1805 },
                { name: "La Boutique del Peix", address: "Pl. del Mercat, 26 (Mercat del Clot)", area: "Clot", lat: 41.4100, lng: 2.1848 },
                { name: "La Parada d'en Rafel", address: "Pl. del Mercat, 26 (Mercat del Clot)", area: "Clot", lat: 41.4100, lng: 2.1848 },
                { name: "Llegums cuits", address: "C. S√®quia Comtal, 14", area: "Clot", lat: 41.4105, lng: 2.1840 },
                { name: "Llibreria Etc√®tera", address: "c/ Llull, 203", area: "Poblenou", notes: "Botiga hist√≤rica; dilluns mat√≠ no PL", lat: 41.3990, lng: 2.1982 },
                { name: "Llibreria Num√†ncia", address: "C. Clot, 184", area: "Clot", lat: 41.4112, lng: 2.1868 },
                { name: "Llibreria Pebre Negre", address: "Carrer Clot, 41", area: "Clot", lat: 41.4105, lng: 2.1845 },
                { name: "Mam√° Heladera", address: "Rbla. Poblenou, 44", area: "Poblenou", lat: 41.4000, lng: 2.1963 },
                { name: "√íptica Poblenou", address: "c. Mari√† Aguil√≥, 88", area: "Poblenou", lat: 41.3975, lng: 2.1940 },
                { name: "Ortop√®dia Clot", address: "C. Clot, 82", area: "Clot", lat: 41.4108, lng: 2.1852 },
                { name: "Orxateria, Gelateria Mallorca", address: "C. Mallorca, 620", area: "Clot", lat: 41.4112, lng: 2.1865 },
                { name: "Papereria L'Amistat", address: "C. Amistat, 7", area: "Poblenou", lat: 41.3965, lng: 2.1925 },
                { name: "Pasta Fresca Celentano", address: "Pl. del Mercat, 26 (Mercat del Clot)", area: "Clot", lat: 41.4100, lng: 2.1848 },
                { name: "Pastisseria Confiteria La Palma", address: "Clot, 68-74", area: "Clot", notes: "Botiga hist√≤rica", lat: 41.4108, lng: 2.1850 },
                { name: "Pastisseria Gual", address: "C. Mallorca, 529", area: "Camp de l'Arpa del Clot", notes: "Botiga hist√≤rica", lat: 41.4112, lng: 2.1855 },
                { name: "Pastisseria Guifr√©", address: "Rambla del Poblenou, 71", area: "Poblenou", lat: 41.4002, lng: 2.1966 },
                { name: "Peix de Platja Carmen", address: "Pl. del Mercat, 26 (Mercat del Clot)", area: "Clot", lat: 41.4100, lng: 2.1848 },
                { name: "Peixos Jack", address: "C. Jaume Huguet, 38 (Mercat Bes√≤s)", area: "El Bes√≤s i El Maresme", lat: 41.4068, lng: 2.2135 },
                { name: "PrincipElsa", address: "C. Mallorca, 592", area: "Clot", lat: 41.4110, lng: 2.1862 },
                { name: "Rep√∫blic Caf√® Poblenou", address: "Rbla. Poblenou, 22", area: "Poblenou", lat: 41.3998, lng: 2.1958 },
                { name: "Saladitos", address: "Pl. del Mercat, 26 (Mercat del Clot)", area: "Clot", lat: 41.4100, lng: 2.1848 },
                { name: "Sanitas Poblenou", address: "Bilbao, 83", area: "Poblenou", notes: "Demanar per la Nat√†lia, matins", lat: 41.4005, lng: 2.1942 },
                { name: "Siente", address: "Rogent, 96", area: "Camp de l'Arpa del Clot", lat: 41.4122, lng: 2.1815 },
                { name: "Teixid√≥", address: "C. Mari√† Aguil√≥, 48", area: "Poblenou", lat: 41.3970, lng: 2.1928 },
                { name: "Tocineria Els Nois", address: "C. Rogent, 132", area: "Camp de l'Arpa del Clot", lat: 41.4125, lng: 2.1820 },
                { name: "Tutto Donna", address: "C. S√®quia Comtal, 3", area: "Clot", lat: 41.4105, lng: 2.1838 },
                { name: "Xagr√≠", address: "Rbla. Poblenou, 77", area: "Poblenou", lat: 41.4003, lng: 2.1968 },
                { name: "Xarcuteria Ros Castell√†", address: "Pl. del Mercat, 26 (Mercat del Clot)", area: "Clot", lat: 41.4100, lng: 2.1848 },
                { name: "Xarcuters J. Tena", address: "Rambla del Poblenou, 89", area: "Poblenou", lat: 41.4003, lng: 2.1969 },
                { name: "Zerovuit brewing", address: "C. Llacuna, 165", area: "Clot", lat: 41.4002, lng: 2.1910 }
            ],
            "Sants-Montju√Øc": [
                { name: "4 Grapes", address: "C/ C√†ceres, 14", area: "Sants", lat: 41.3755, lng: 2.1408 },
                { name: "Aguapur", address: "Rector Triad√≥, 15", area: "Hostafrancs", lat: 41.3758, lng: 2.1430 },
                { name: "Associaci√≥ cultural La Bibliomusicineteca", address: "C/ Vila i Vil√†, 76", area: "Poble-sec", lat: 41.3742, lng: 2.1612 },
                { name: "Barbiblio", address: "Amnistia Internacional, 10", area: "La Marina", notes: "Cal preguntar per l'Andrea", lat: 41.3660, lng: 2.1385 },
                { name: "Bar-celona (Sants)", address: "Sants, 308", area: "Sants-Badal", notes: "Pr√†ctiques nom√©s matins", lat: 41.3762, lng: 2.1290 },
                { name: "Bar-celona (Vallespir)", address: "Vallespir, 81", area: "Sants-Badal", lat: 41.3762, lng: 2.1315 },
                { name: "Barra/llibre", address: "Riego, 13", area: "Sants", lat: 41.3755, lng: 2.1422 },
                { name: "Cansaladeria Joan Vidal", address: "Vallespir, 55", area: "Sants", lat: 41.3760, lng: 2.1312 },
                { name: "Cansaladeries Aldom√†", address: "Mercat d'Hostafrancs, parada 169-198", area: "Hostafrancs", lat: 41.3755, lng: 2.1468 },
                { name: "Carnisseria Arrom", address: "Mercat de Sants, carrer Sant Jordi, 6", area: "Sants", lat: 41.3762, lng: 2.1378 },
                { name: "Carns Gasull", address: "Mercat de Sants, carrer Sant Jordi, 6", area: "Sants", lat: 41.3762, lng: 2.1378 },
                { name: "Casa Vives", address: "Sants, 74", area: "Sants", lat: 41.3758, lng: 2.1415 },
                { name: "Celler de Gelida", address: "Vallespir, 65", area: "Sants", lat: 41.3762, lng: 2.1315 },
                { name: "Centre de Ter√†pies S√†lvia", address: "Ricart, 3", area: "Poble-sec", lat: 41.3745, lng: 2.1618 },
                { name: "Espai Tallerets", address: "Carrer Antoni de Capmany, 71", area: "Sants", lat: 41.3762, lng: 2.1362 },
                { name: "Farm√†cia √Ängels Escol√† Marco", address: "Sant Roc, 26", area: "Hostafrancs", lat: 41.3755, lng: 2.1440 },
                { name: "Farm√†cia Domingo", address: "Salv√†, 33", area: "Poble-sec", lat: 41.3745, lng: 2.1625 },
                { name: "Flors Dolors", address: "Mercat d'Hostafrancs, parada exterior 86", area: "Hostafrancs", lat: 41.3755, lng: 2.1468 },
                { name: "Fruiteria El Tros", address: "Creu Coberta, 93", area: "Hostafrancs", lat: 41.3755, lng: 2.1468 },
                { name: "Fruits secs Roser", address: "C/ Creu Coberta, 93", area: "Hostafrancs", lat: 41.3755, lng: 2.1468 },
                { name: "Granja La Tassa", address: "Gran Via de les Corts Catalanes, 278", area: "La Font de la Guatlla", lat: 41.3750, lng: 2.1508 },
                { name: "Index Books", address: "Melcior de Palau, 145", area: "Sants", lat: 41.3778, lng: 2.1320 },
                { name: "Juguetes Rubio", address: "Creu dels Molers, 36-38", area: "Poble-sec", lat: 41.3748, lng: 2.1638 },
                { name: "J√∫lia Fruites i Verdures", address: "Mercat de Sants, carrer Sant Jordi, 6", area: "Sants", lat: 41.3762, lng: 2.1378 },
                { name: "Kaburi", address: "Sants, 17", area: "Sants", lat: 41.3758, lng: 2.1408 },
                { name: "La Carbonera", address: "Blai, 40", area: "Poble-sec", lat: 41.3742, lng: 2.1640 },
                { name: "La carn de la Noe", address: "c/ Creu Coberta, 93", area: "Hostafrancs", lat: 41.3755, lng: 2.1468 },
                { name: "La Conxita", address: "Vallespir, 59", area: "Sants", lat: 41.3760, lng: 2.1312 },
                { name: "La igualit√†ria Economat Cooperatiu", address: "Vallhonrat, 18", area: "Poble-sec", lat: 41.3748, lng: 2.1630 },
                { name: "Lemon Printers", address: "Portbou, 30", area: "Sants", lat: 41.3758, lng: 2.1388 },
                { name: "L'estanc del carrer Blai", address: "Carrer Blai, 1", area: "Poble-sec", lat: 41.3742, lng: 2.1635 },
                { name: "Llegits", address: "Sants, 162", area: "Sants", lat: 41.3762, lng: 2.1358 },
                { name: "Llet crua", address: "C/ C√†ceres, 14", area: "Sants", lat: 41.3755, lng: 2.1408 },
                { name: "Marisc Vilaespasa", address: "C/ Hostafrancs, 93", area: "Hostafrancs", lat: 41.3755, lng: 2.1468 },
                { name: "Momments", address: "Carrer dels Comtes de Bell-lloc, 80", area: "Sants", lat: 41.3762, lng: 2.1348 },
                { name: "Nadons i mamis", address: "C/ Sant Medir, 4", area: "Sants", lat: 41.3760, lng: 2.1390 },
                { name: "Nou 132 Serigrafia", address: "Nou de la Rambla, 132", area: "Poble-sec", lat: 41.3748, lng: 2.1648 },
                { name: "Papereria llibreria Nitus", address: "Blai, 6", area: "Poble-sec", lat: 41.3742, lng: 2.1635 },
                { name: "Papereria Nu&Ca", address: "Roser, 5", area: "Poble-sec", lat: 41.3745, lng: 2.1622 },
                { name: "Peixateria Maria Llu√Øsa", address: "Olivera, 33", area: "Poble-sec", lat: 41.3745, lng: 2.1628 },
                { name: "Peixos Mart√≠", address: "C/ Creu Coberta, 93", area: "Hostafrancs", lat: 41.3755, lng: 2.1468 },
                { name: "Roldan Joiers", address: "C/ Blai, 16", area: "Poble-sec", lat: 41.3742, lng: 2.1638 },
                { name: "Teixits P√†dua", address: "Sant Jordi, 13", area: "Sants", lat: 41.3762, lng: 2.1378 },
                { name: "Terra de salut", address: "Blesa, 45", area: "Poble-sec", lat: 41.3748, lng: 2.1628 }
            ],
            "Sarri√† - Sant Gervasi": [
                { name: "√Äudio V√≠deo Tell", address: "C/ Guillem Tell, 36", area: "El Farr√≥", lat: 41.3998, lng: 2.1408 },
                { name: "√ÄUPALI!", address: "C. de la Tradici√≥, 5", area: "Sarri√†", lat: 41.3985, lng: 2.1148 },
                { name: "BANBO TOYS", address: "Laforja, 77", area: "Galvany", lat: 41.3988, lng: 2.1520 },
                { name: "BO DE BO", address: "C. Sant Hermenegild, 7-9", area: "El Farr√≥", lat: 41.3998, lng: 2.1412 },
                { name: "Boc√≠", address: "Via Augusta, 112", area: "El Farr√≥", lat: 41.3998, lng: 2.1422 },
                { name: "Cake House", address: "Pl. Ma√±√© i Flaquer, 4", area: "El Farr√≥", lat: 41.3998, lng: 2.1418 },
                { name: "Cal√ßats Arenillas", address: "Av. Riera de Cassoles, 15", area: "El Farr√≥", lat: 41.4008, lng: 2.1375 },
                { name: "Farm√†cia Ana Mera Albarrac√≠n", address: "Av. Riera de Cassoles, 43", area: "El Farr√≥", lat: 41.4010, lng: 2.1382 },
                { name: "Farm√†cia Marco Consentino", address: "C. Puig-reig, 10", area: "El Farr√≥", lat: 41.4005, lng: 2.1390 },
                { name: "Farm√†cia Ortop√®dia Bonaplata", address: "C. Bonaplata, 32", area: "Sarri√†", lat: 41.3985, lng: 2.1130 },
                { name: "Floristeria Margarita", address: "C. P√†dua, 98", area: "El Farr√≥", lat: 41.4005, lng: 2.1420 },
                { name: "FORN DE CABRIANES", address: "C. Major de Sarri√†, 100", area: "Sarri√†", lat: 41.3992, lng: 2.1158 },
                { name: "GARITU VERMUTERIA", address: "Av. Riera de Cassoles, 67", area: "El Farr√≥", lat: 41.4012, lng: 2.1388 },
                { name: "Handsel & Granel", address: "Av. Riera de Cassoles, 13", area: "El Farr√≥", lat: 41.4008, lng: 2.1372 },
                { name: "HORT DEL FARR√ì", address: "C. Septim√†nia, 51", area: "El Farr√≥", lat: 41.4000, lng: 2.1402 },
                { name: "La Papereria J.R.", address: "Av. de la Riera de Cassoles, 9", area: "El Farr√≥", lat: 41.4008, lng: 2.1370 },
                { name: "La Piccola Llibreria Italiana", address: "Pl. Sant Vicen√ß de Sarri√†, 2", area: "Sarri√†", lat: 41.3988, lng: 2.1152 },
                { name: "LA SASTRERIA BARCELONA", address: "Av. Riera de Cassoles, 7", area: "El Farr√≥", lat: 41.4008, lng: 2.1368 },
                { name: "LA TIETA PATCH", address: "Av. Riera de Cassoles, 39, local 2", area: "El Farr√≥", lat: 41.4010, lng: 2.1380 },
                { name: "Le Pain d'√âric & Benjamin", address: "C. Cardenal Vives i Tut√≥, 60", area: "Sarri√†", lat: 41.3988, lng: 2.1142 },
                { name: "Llibreria A Peu de P√†gina", address: "C/ Major de Sarri√†, 50", area: "Sarri√†", lat: 41.3990, lng: 2.1150 },
                { name: "L'OBJECTISTA", address: "Via Augusta, 106", area: "El Farr√≥", lat: 41.3997, lng: 2.1420 },
                { name: "Matalasseria A. Mercader", address: "C. Alfons XII, 81", area: "El Farr√≥", lat: 41.4002, lng: 2.1415 },
                { name: "Ous i Aviram Mari", address: "Passeig de la Reina Elisenda de Montcada, 8", area: "Sarri√†", lat: 41.3985, lng: 2.1135 },
                { name: "Pastisseria La perla de Sant Gervasi", address: "C. de les Santjoanistes, 6", area: "El Farr√≥", lat: 41.4000, lng: 2.1410 },
                { name: "STENCIL BARCELONA", address: "Av. de la Riera de Cassoles, 11", area: "El Farr√≥", lat: 41.4008, lng: 2.1372 },
                { name: "TOSSUDA STUDIO", address: "C. Vallirana, 63, local dret", area: "El Farr√≥", lat: 41.4002, lng: 2.1418 },
                { name: "Xarcuteria Llu√≠s Bragulat", address: "C/ P√†dua, 105", area: "El Farr√≥", lat: 41.4005, lng: 2.1422 }
            ]
        };

        let allExpanded = false;

        function generateMapsUrl(lat, lng, name, address) {
            // Use name + address as the search query so Google Maps displays the place name
            const query = encodeURIComponent(`${name}, ${address}, Barcelona`);
            return `https://www.google.com/maps/search/?api=1&query=${query}`;
        }

        function switchTab(tab) {
            const listView = document.getElementById('listView');
            const mapView = document.getElementById('mapView');
            const tabList = document.getElementById('tabList');
            const tabMap = document.getElementById('tabMap');

            if (tab === 'map') {
                listView.style.display = 'none';
                mapView.classList.add('active');
                tabMap.classList.add('active');
                tabList.classList.remove('active');
                // Init Leaflet map on first open
                setTimeout(() => {
                    initMap();
                    if (leafletMap) leafletMap.invalidateSize();
                }, 50);
            } else {
                listView.style.display = 'block';
                mapView.classList.remove('active');
                tabList.classList.add('active');
                tabMap.classList.remove('active');
            }
        }

        function renderEstablishments() {
            const content = document.getElementById('content');
            content.innerHTML = '';
            
            Object.entries(establishments).forEach(([district, estabs]) => {
                const districtDiv = document.createElement('div');
                districtDiv.className = 'district collapsed';
                
                const header = document.createElement('div');
                header.className = 'district-header';
                header.innerHTML = `
                    <div style="display: flex; align-items: center; flex: 1;">
                        <span class="district-title">${district}</span>
                        <span class="district-count">${estabs.length}</span>
                    </div>
                    <span class="district-toggle">‚ñº</span>
                `;
                
                header.addEventListener('click', () => {
                    districtDiv.classList.toggle('expanded');
                    districtDiv.classList.toggle('collapsed');
                });
                
                const estabsDiv = document.createElement('div');
                estabsDiv.className = 'establishments';
                
                estabs.forEach(estab => {
                    const estabDiv = document.createElement('div');
                    estabDiv.className = 'establishment';
                    estabDiv.dataset.name = estab.name.toLowerCase();
                    estabDiv.dataset.address = estab.address.toLowerCase();
                    estabDiv.dataset.area = estab.area.toLowerCase();
                    
                    const mapsUrl = generateMapsUrl(estab.lat, estab.lng, estab.name, estab.address);
                    
                    estabDiv.innerHTML = `
                        <a href="${mapsUrl}" class="establishment-link" target="_blank">
                            <div class="establishment-name">
                                <span class="establishment-icon">üìç</span>
                                ${estab.name}
                            </div>
                            <div class="establishment-address">${estab.address} ¬∑ ${estab.area}</div>
                            ${estab.notes ? `<div class="establishment-notes">${estab.notes}</div>` : ''}
                        </a>
                    `;
                    
                    estabsDiv.appendChild(estabDiv);
                });
                
                districtDiv.appendChild(header);
                districtDiv.appendChild(estabsDiv);
                content.appendChild(districtDiv);
            });
        }

        function performSearch(query) {
            const lowerQuery = query.toLowerCase().trim();
            const districts = document.querySelectorAll('.district');
            const noResults = document.getElementById('noResults');
            let visibleCount = 0;
            
            if (!lowerQuery) {
                districts.forEach(district => {
                    district.classList.remove('hidden');
                    const establishments = district.querySelectorAll('.establishment');
                    establishments.forEach(e => e.classList.remove('hidden'));
                    visibleCount += establishments.length;
                });
                noResults.classList.add('hidden');
                document.getElementById('visibleCount').textContent = visibleCount;
                return;
            }
            
            districts.forEach(district => {
                const establishments = district.querySelectorAll('.establishment');
                let districtHasVisible = false;
                
                establishments.forEach(estab => {
                    const name = estab.dataset.name;
                    const address = estab.dataset.address;
                    const area = estab.dataset.area;
                    
                    if (name.includes(lowerQuery) || address.includes(lowerQuery) || area.includes(lowerQuery)) {
                        estab.classList.remove('hidden');
                        districtHasVisible = true;
                        visibleCount++;
                    } else {
                        estab.classList.add('hidden');
                    }
                });
                
                if (districtHasVisible) {
                    district.classList.remove('hidden');
                    district.classList.add('expanded');
                    district.classList.remove('collapsed');
                } else {
                    district.classList.add('hidden');
                }
            });
            
            if (visibleCount === 0) {
                noResults.classList.remove('hidden');
            } else {
                noResults.classList.add('hidden');
            }
            
            document.getElementById('visibleCount').textContent = visibleCount;
        }

        document.getElementById('searchInput').addEventListener('input', (e) => {
            performSearch(e.target.value);
        });

        document.getElementById('expandAllBtn').addEventListener('click', function() {
            const districts = document.querySelectorAll('.district');
            allExpanded = !allExpanded;
            
            districts.forEach(district => {
                if (allExpanded) {
                    district.classList.add('expanded');
                    district.classList.remove('collapsed');
                } else {
                    district.classList.remove('expanded');
                    district.classList.add('collapsed');
                }
            });
            
            this.textContent = allExpanded ? 'Col¬∑lapsar tots els districtes' : 'Expandir tots els districtes';
        });

        // Initialize
        renderEstablishments();

        // District colors for map markers
        const districtColors = {
            "Ciutat Vella": "#e53935",
            "Eixample": "#8e24aa",
            "Gr√†cia": "#f57c00",
            "Horta-Guinard√≥": "#00897b",
            "Les Corts": "#1e88e5",
            "Nou Barris": "#43a047",
            "Sant Andreu": "#d81b60",
            "Sant Mart√≠": "#3949ab",
            "Sants-Montju√Øc": "#c0ca33",
            "Sarri√† - Sant Gervasi": "#6d4c41"
        };

        let leafletMap = null;

        function initMap() {
            if (leafletMap) return; // already initialized

            leafletMap = L.map('leafletMap', { zoomControl: true }).setView([41.3874, 2.1686], 12);

            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '¬© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',
                maxZoom: 19
            }).addTo(leafletMap);

            Object.entries(establishments).forEach(([district, estabs]) => {
                const color = districtColors[district] || '#d84315';

                estabs.forEach(estab => {
                    if (!estab.lat || !estab.lng) return;

                    const mapsUrl = generateMapsUrl(estab.lat, estab.lng, estab.name, estab.address);

                    const icon = L.divIcon({
                        className: '',
                        html: `<div style="
                            width:18px;height:18px;
                            border-radius:50%;
                            background:${color};
                            border:3px solid white;
                            box-shadow:0 2px 8px rgba(0,0,0,0.45), 0 0 0 2px ${color}55;
                        "></div>`,
                        iconSize: [18, 18],
                        iconAnchor: [9, 9],
                        popupAnchor: [0, -12]
                    });

                    const marker = L.marker([estab.lat, estab.lng], { icon }).addTo(leafletMap);

                    const notesHtml = estab.notes
                        ? `<div style="margin-top:6px;font-size:0.75rem;color:#d84315;padding:4px 6px;background:#fef8f5;border-left:3px solid #d84315;border-radius:3px;">${estab.notes}</div>`
                        : '';

                    marker.bindPopup(`
                        <div style="font-family:'DM Sans',sans-serif;min-width:180px;">
                            <div style="font-weight:700;font-size:0.9rem;margin-bottom:3px;">${estab.name}</div>
                            <div style="font-size:0.8rem;color:#666;margin-bottom:2px;">${estab.address}</div>
                            <div style="font-size:0.75rem;color:#999;margin-bottom:8px;">${estab.area} ¬∑ <span style="color:${color};font-weight:600;">${district}</span></div>
                            ${notesHtml}
                            <a href="${mapsUrl}" target="_blank" style="
                                display:inline-block;margin-top:8px;padding:5px 10px;
                                background:#d84315;color:white;border-radius:6px;
                                text-decoration:none;font-size:0.8rem;font-weight:600;
                            ">Navegar üß≠</a>
                        </div>
                    `, { maxWidth: 260 });
                });
            });

            // Legend
        const districtCenters = {
            "Ciutat Vella":        [41.3808, 2.1810],
            "Eixample":            [41.3916, 2.1645],
            "Gr√†cia":              [41.4101, 2.1524],
            "Horta-Guinard√≥":      [41.4291, 2.1505],
            "Les Corts":           [41.3870, 2.1182],
            "Nou Barris":          [41.4462, 2.1751],
            "Sant Andreu":         [41.4351, 2.1933],
            "Sant Mart√≠":          [41.4076, 2.2012],
            "Sants-Montju√Øc":      [41.3499, 2.1449],
            "Sarri√† - Sant Gervasi":[41.4128, 2.1061]
        };

            const legend = L.control({ position: 'bottomleft' });
            legend.onAdd = function() {
                const div = L.DomUtil.create('div');
                div.style.cssText = 'background:white;padding:10px 14px;border-radius:10px;box-shadow:0 2px 12px rgba(0,0,0,0.25);font-family:DM Sans,sans-serif;font-size:12px;line-height:1.4;color:#1a1614;max-width:210px;';
                div.innerHTML = '<div style="font-weight:700;margin-bottom:7px;font-size:12px;color:#1a1614;">Districtes ¬∑ toca per fer zoom</div>' +
                    Object.entries(districtColors).map(([d, c]) =>
                    `<div data-district="${d}" style="display:flex;align-items:center;gap:7px;margin-bottom:5px;cursor:pointer;padding:3px 5px;border-radius:6px;transition:background 0.15s;" 
                          onmouseover="this.style.background='#f5f5f5'" onmouseout="this.style.background='transparent'">
                        <div style="width:14px;height:14px;border-radius:50%;background:${c};flex-shrink:0;border:2.5px solid white;box-shadow:0 1px 4px rgba(0,0,0,0.35), 0 0 0 1.5px ${c}55;"></div>
                        <span style="color:#1a1614;white-space:nowrap;font-weight:500;">${d}</span>
                    </div>`
                ).join('');

                // Add click handlers after DOM insertion
                setTimeout(() => {
                    div.querySelectorAll('[data-district]').forEach(el => {
                        el.addEventListener('click', () => {
                            const name = el.dataset.district;
                            const center = districtCenters[name];
                            if (center && leafletMap) {
                                leafletMap.flyTo(center, 14, { duration: 1.2 });
                            }
                        });
                    });
                }, 0);

                return div;
            };
            legend.addTo(leafletMap);
        }


    </script>
</body>
</html>
